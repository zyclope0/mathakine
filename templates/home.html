{% extends "base.html" %}

{% block title %}Accueil - Mathakine{% endblock %}

{% block head %}
<!-- Déjà chargé conditionnellement dans le template base.html -->
{% endblock %}

{% block content %}
{% if error_message %}
<div class="error-alert" role="alert" aria-live="assertive">
    <div class="error-icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></div>
    <div class="error-message">{{ error_message }}</div>
</div>
{% endif %}

<div class="hero-section">
    <div class="stars-container" aria-hidden="true">
        <!-- Les étoiles et planètes seront ajoutées ici par JavaScript -->
    </div>
    
    <div class="card hero-card">
        <div class="hero-flex">
            <div class="hero-content">
                <h2>Bienvenue dans la galaxie Mathakine</h2>
                <p class="hero-subtitle">Embarquez pour un voyage stellaire à travers les mathématiques et maîtrisez la Force des nombres !</p>
                
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-number"><i class="fas fa-calculator" aria-hidden="true"></i> 150+</div>
                        <div class="stat-label">Exercices</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number"><i class="fas fa-brain" aria-hidden="true"></i> 4</div>
                        <div class="stat-label">Niveaux</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number"><i class="fas fa-trophy" aria-hidden="true"></i> ∞</div>
                        <div class="stat-label">Possibilités</div>
                    </div>
                </div>
                
                <a href="/api/exercises/generate?ai=true" class="btn big-btn primary-btn" aria-label="Commencer l'aventure avec un exercice généré par IA">
                    <i class="fas fa-jedi" aria-hidden="true"></i> Commencer l'aventure
                </a>
            </div>
            <div class="hero-image" aria-hidden="true">
                <div class="space-object"></div>
            </div>
        </div>
    </div>
</div>

<section class="features-section" aria-labelledby="features-title">
    <div class="visually-hidden" id="features-title">Caractéristiques principales</div>
    <div class="card feature-card">
        <div class="feature-icon"><i class="fas fa-calculator" aria-hidden="true"></i></div>
        <h3>Opérations Stellaires</h3>
        <p>Maîtrisez les additions, soustractions, multiplications et divisions à travers différents niveaux galactiques</p>
    </div>
    
    <div class="card feature-card">
        <div class="feature-icon"><i class="fas fa-chart-line" aria-hidden="true"></i></div>
        <h3>Progression Cosmique</h3>
        <p>Suivez votre progression via le tableau de bord galactique avec graphiques interactifs et statistiques détaillées</p>
    </div>
    
    <div class="card feature-card">
        <div class="feature-icon"><i class="fas fa-brain" aria-hidden="true"></i></div>
        <h3>Défis Logiques</h3>
        <p>Relevez les nouveaux défis du Conseil Jedi avec des exercices de logique adaptés aux Padawans de 10-15 ans</p>
    </div>
</section>

<section class="card about-card" aria-labelledby="about-title">
    <h3 id="about-title">À propos de Mathakine 4.0</h3>
    <p>La nouvelle version de Mathakine offre une expérience d'apprentissage galactique améliorée avec :</p>
    <ul>
        <li>Une interface utilisateur immersive inspirée de l'univers Star Wars</li>
        <li>Génération d'exercices avec contexte Star Wars par technologie pseudo-IA</li>
        <li>Support complet pour PostgreSQL en production et SQLite en développement</li>
        <li>Un système de progression adaptatif pour suivre votre évolution</li>
        <li>Architecture moderne et extensible pour de futures fonctionnalités</li>
    </ul>
    <p class="version-note">Rejoignez l'aventure et devenez un Maître Jedi des mathématiques !</p>
    
    <div class="new-features">
        <h4><i class="fas fa-star" aria-hidden="true"></i> Nouveautés</h4>
        <div class="new-feature">
            <span class="feature-badge">Nouveau</span>
            <span>Défis logiques pour Padawans avancés (10-15 ans)</span>
        </div>
        <div class="new-feature">
            <span class="feature-badge">Nouveau</span>
            <span>Génération améliorée avec contextes Star Wars</span>
        </div>
        <div class="new-feature">
            <span class="feature-badge">Amélioré</span>
            <span>Tableau de bord avec visualisation des statistiques en temps réel</span>
        </div>
    </div>
    
    <div class="project-links mt-4">
        <a href="https://github.com/zyclope0/mathakine" class="btn primary-btn" target="_blank" rel="noopener noreferrer" aria-label="Consulter le projet Mathakine sur GitHub">
            <i class="fab fa-github" aria-hidden="true"></i> Consulter le projet sur GitHub
        </a>
    </div>
</section>

<section class="levels-section" aria-labelledby="levels-title">
    <h3 id="levels-title">Votre Progression dans la Force</h3>
    <div class="levels-grid">
        <div class="level-card">
            <div class="level-icon initiate" aria-hidden="true"></div>
            <h4>Initié</h4>
            <p>Premiers pas dans le temple mathématique</p>
        </div>
        <div class="level-card">
            <div class="level-icon padawan" aria-hidden="true"></div>
            <h4>Padawan</h4>
            <p>Apprentissage des techniques fondamentales</p>
        </div>
        <div class="level-card">
            <div class="level-icon knight" aria-hidden="true"></div>
            <h4>Chevalier</h4>
            <p>Maîtrise des compétences avancées</p>
        </div>
        <div class="level-card">
            <div class="level-icon master" aria-hidden="true"></div>
            <h4>Maître</h4>
            <p>Sagesse et excellence mathématique</p>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Fonction pour créer des étoiles dans le conteneur
    document.addEventListener('DOMContentLoaded', function() {
        const starsContainer = document.querySelector('.stars-container');
        if (starsContainer) {
            // Créer des étoiles aléatoires
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = Math.random() * 100 + '%';
                star.style.left = Math.random() * 100 + '%';
                star.style.width = (Math.random() * 2 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 5 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                starsContainer.appendChild(star);
            }
            
            // Créer quelques planètes
            const planetColors = ['planet-blue', 'planet-red', 'planet-green', 'planet-purple', 'planet-gold'];
            for (let i = 0; i < 3; i++) {
                const planet = document.createElement('div');
                planet.className = 'floating-planet ' + planetColors[Math.floor(Math.random() * planetColors.length)];
                planet.style.top = Math.random() * 100 + '%';
                planet.style.left = Math.random() * 100 + '%';
                planet.style.width = (Math.random() * 15 + 10) + 'px';
                planet.style.height = planet.style.width;
                planet.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(planet);
            }
        }
        
        // Animation d'entrée pour les cartes de niveau
        const levelCards = document.querySelectorAll('.level-card');
        if (levelCards.length) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('fade-in-up');
                        }, index * 150);
                    }
                });
            }, { threshold: 0.2 });
            
            levelCards.forEach(card => {
                observer.observe(card);
            });
        }
        
        // Animation d'entrée pour les cartes de fonctionnalités
        const featureCards = document.querySelectorAll('.feature-card');
        if (featureCards.length) {
            featureCards.forEach((card, index) => {
                card.style.setProperty('--card-index', index);
            });
        }
    });
</script>
{% endblock %} 