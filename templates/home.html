{% extends "base.html" %}

{% block title %}Accueil - Mathakine{% endblock %}

{% block head %}
<!-- Déjà chargé conditionnellement dans le template base.html -->
{% endblock %}

{% block content %}
{% if error_message %}
<div class="error-alert" role="alert" aria-live="assertive">
    <div class="error-icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></div>
    <div class="error-message">{{ error_message }}</div>
</div>
{% endif %}

<div class="hero-section">
    <div class="stars-container" aria-hidden="true">
        <!-- Les étoiles et planètes seront ajoutées ici par JavaScript -->
    </div>
    
    <div class="card hero-card">
        <div class="hero-flex">
            <div class="hero-content">
                <h2 class="hero-title">Bienvenue dans la galaxie Mathakine</h2>
                <p class="hero-subtitle">Embarquez pour un voyage stellaire à travers les mathématiques et maîtrisez la Force des nombres !</p>
                
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-number">
                            <i class="fas fa-calculator" aria-hidden="true"></i> 
                            <span class="number">150+</span>
                        </div>
                        <div class="stat-label">Exercices disponibles</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">
                            <i class="fas fa-brain" aria-hidden="true"></i> 
                            <span class="number">4</span>
                        </div>
                        <div class="stat-label">Niveaux de difficulté</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">
                            <i class="fas fa-infinity" aria-hidden="true"></i> 
                            <span class="number">∞</span>
                        </div>
                        <div class="stat-label">Possibilités d'apprentissage</div>
                    </div>
                </div>
                
                <div class="hero-actions">
                    <a href="/api/exercises/generate?ai=true" class="btn btn-large btn-primary cta-primary btn-unified" aria-label="Commencer l'aventure avec un exercice généré par IA">
                        <i class="fas fa-jedi" aria-hidden="true"></i> 
                        <span>Commencer l'aventure</span>
                    </a>
                    <a href="/exercises" class="btn btn-large btn-ghost cta-secondary" aria-label="Explorer tous les exercices disponibles">
                        <i class="fas fa-list" aria-hidden="true"></i> 
                        <span>Explorer les exercices</span>
                    </a>
                </div>
            </div>
            <div class="hero-image" aria-hidden="true">
                <div class="space-object"></div>
            </div>
        </div>
    </div>
</div>

<section class="features-section" aria-labelledby="features-title">
    <div class="section-header">
        <h3 id="features-title">Caractéristiques principales</h3>
        <p class="section-subtitle">Découvrez les fonctionnalités qui font de Mathakine une expérience unique</p>
    </div>
    
    <div class="features-grid">
        <div class="card feature-card card-unified card-feature">
            <div class="feature-icon">
                <i class="fas fa-calculator" aria-hidden="true"></i>
            </div>
            <h4>Opérations Stellaires</h4>
            <p>Maîtrisez les additions, soustractions, multiplications et divisions à travers différents niveaux galactiques adaptés à votre progression.</p>
            <a href="/exercises?exercise_type=addition" class="feature-link">
                <i class="fas fa-arrow-right"></i> Découvrir
            </a>
        </div>
        
        <div class="card feature-card card-unified card-feature">
            <div class="feature-icon">
                <i class="fas fa-chart-line" aria-hidden="true"></i>
            </div>
            <h4>Progression Cosmique</h4>
            <p>Suivez votre progression via le tableau de bord galactique avec graphiques interactifs et statistiques détaillées en temps réel.</p>
            <a href="/dashboard" class="feature-link">
                <i class="fas fa-arrow-right"></i> Voir mes stats
            </a>
        </div>
        
        <div class="card feature-card card-unified card-feature">
            <div class="feature-icon">
                <i class="fas fa-baby" aria-hidden="true"></i>
            </div>
            <h4>Exercices Simples</h4>
            <p>Interface simplifiée pour les jeunes Padawans. Calculs de base avec addition, soustraction et division uniquement.</p>
            <a href="#" onclick="window.location.href='/exercises'; return false;" class="feature-link">
                <i class="fas fa-arrow-right"></i> Mode Simple
            </a>
        </div>
        
        <div class="card feature-card card-unified card-feature">
            <div class="feature-icon">
                <i class="fas fa-brain" aria-hidden="true"></i>
            </div>
            <h4>Défis Logiques</h4>
            <p>Relevez les nouveaux défis du Conseil Jedi avec des exercices de logique adaptés aux Padawans de 10-15 ans.</p>
            <a href="/challenges" class="feature-link">
                <i class="fas fa-arrow-right"></i> Relever les défis
            </a>
        </div>
    </div>
</section>

<section class="card about-card card-unified" aria-labelledby="about-title">
    <div class="about-header">
        <h3 id="about-title">À propos de Mathakine 4.0</h3>
        <div class="version-badge">Version 4.0 - L'API Rebelle</div>
    </div>
    
    <div class="about-content">
        <p class="about-intro">La nouvelle version de Mathakine offre une expérience d'apprentissage galactique améliorée avec :</p>
        
        <div class="features-list">
            <div class="feature-item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>Interface utilisateur immersive inspirée de l'univers Star Wars</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>Génération d'exercices avec contexte Star Wars par technologie pseudo-IA</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>Support complet pour PostgreSQL en production et SQLite en développement</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>Système de progression adaptatif pour suivre votre évolution</span>
            </div>
            <div class="feature-item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>Architecture moderne et extensible pour de futures fonctionnalités</span>
            </div>
        </div>
        
        <p class="version-note">Rejoignez l'aventure et devenez un Maître Jedi des mathématiques !</p>
    </div>
    
    <div class="new-features">
        <h4><i class="fas fa-star" aria-hidden="true"></i> Nouveautés récentes</h4>
        <div class="new-features-grid">
            <div class="new-feature">
                <span class="feature-badge new">Nouveau</span>
                <span>Défis logiques pour Padawans avancés (10-15 ans)</span>
            </div>
            <div class="new-feature">
                <span class="feature-badge new">Nouveau</span>
                <span>Génération améliorée avec contextes Star Wars</span>
            </div>
            <div class="new-feature">
                <span class="feature-badge improved">Amélioré</span>
                <span>Tableau de bord avec visualisation des statistiques en temps réel</span>
            </div>
        </div>
    </div>
    
    <div class="project-links mt-lg">
        <a href="https://github.com/zyclope0/mathakine" class="btn btn-primary" target="_blank" rel="noopener noreferrer" aria-label="Consulter le projet Mathakine sur GitHub">
            <i class="fab fa-github" aria-hidden="true"></i> Consulter le projet sur GitHub
        </a>
    </div>
</section>

<section class="levels-section" aria-labelledby="levels-title">
    <div class="section-header">
        <h3 id="levels-title">Votre Progression dans la Force</h3>
        <p class="section-subtitle">Évoluez à travers les rangs Jedi en maîtrisant les mathématiques</p>
    </div>
    
    <div class="levels-grid">
        <div class="level-card initiate-level card-unified">
            <div class="level-icon initiate" aria-hidden="true">
                <i class="fas fa-seedling"></i>
            </div>
            <h4>Initié</h4>
            <p>Premiers pas dans le temple mathématique</p>
            <div class="level-range">Nombres 1-10</div>
        </div>
        <div class="level-card padawan-level">
            <div class="level-icon padawan" aria-hidden="true">
                <i class="fas fa-user-graduate"></i>
            </div>
            <h4>Padawan</h4>
            <p>Apprentissage des techniques fondamentales</p>
            <div class="level-range">Nombres 10-50</div>
        </div>
        <div class="level-card knight-level">
            <div class="level-icon knight" aria-hidden="true">
                <i class="fas fa-sword"></i>
            </div>
            <h4>Chevalier</h4>
            <p>Maîtrise des compétences avancées</p>
            <div class="level-range">Nombres 50-100</div>
        </div>
        <div class="level-card master-level">
            <div class="level-icon master" aria-hidden="true">
                <i class="fas fa-crown"></i>
            </div>
            <h4>Maître</h4>
            <p>Sagesse et excellence mathématique</p>
            <div class="level-range">Nombres 100-500</div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Fonction pour créer des étoiles dans le conteneur
    document.addEventListener('DOMContentLoaded', function() {
        const starsContainer = document.querySelector('.stars-container');
        if (starsContainer) {
            // Créer des étoiles aléatoires
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = Math.random() * 100 + '%';
                star.style.left = Math.random() * 100 + '%';
                star.style.width = (Math.random() * 2 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 5 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                starsContainer.appendChild(star);
            }
            
            // Créer quelques planètes
            const planetColors = ['planet-blue', 'planet-red', 'planet-green', 'planet-purple', 'planet-gold'];
            for (let i = 0; i < 3; i++) {
                const planet = document.createElement('div');
                planet.className = 'floating-planet ' + planetColors[Math.floor(Math.random() * planetColors.length)];
                planet.style.top = Math.random() * 100 + '%';
                planet.style.left = Math.random() * 100 + '%';
                planet.style.width = (Math.random() * 15 + 10) + 'px';
                planet.style.height = planet.style.width;
                planet.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(planet);
            }
        }
        
        // Animation d'entrée pour les cartes de niveau
        const levelCards = document.querySelectorAll('.level-card');
        if (levelCards.length) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('fade-in-up');
                        }, index * 150);
                    }
                });
            }, { threshold: 0.2 });
            
            levelCards.forEach(card => {
                observer.observe(card);
            });
        }
        
        // Animation d'entrée pour les cartes de fonctionnalités
        const featureCards = document.querySelectorAll('.feature-card');
        if (featureCards.length) {
            featureCards.forEach((card, index) => {
                card.style.setProperty('--card-index', index);
            });
        }
    });
</script>
{% endblock %} 