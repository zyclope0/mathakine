<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Syst√®me Hybride - Mathakine</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 2rem; 
            background: #1a1f3a; 
            color: #e2e8f0; 
        }
        .test-section {
            background: #2a2f4a;
            border: 2px solid #4a6bff;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .challenge-button {
            background: linear-gradient(135deg, #4a6bff, #8b5cf6);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 0.5rem;
            transition: transform 0.2s ease;
        }
        .challenge-button:hover {
            transform: translateY(-2px);
        }
        .exercise-btn { background: linear-gradient(135deg, #4a6bff, #8b5cf6); }
        .logic-btn { background: linear-gradient(135deg, #f59e0b, #f97316); }
        .hybrid-btn { background: linear-gradient(135deg, #10b981, #4a6bff); }
        .log { 
            background: #111827; 
            padding: 1rem; 
            border-radius: 8px; 
            font-family: monospace; 
            max-height: 200px; 
            overflow-y: auto; 
        }
    </style>
</head>
<body>
    <h1>üß™ Test du Syst√®me Hybride de Challenges</h1>
    
    <div class="test-section">
        <h2>üìö Challenges d'Exercices (IDs 1-4)</h2>
        <p>Teste les redirections vers la page exercices avec filtres</p>
        <button class="challenge-button exercise-btn" onclick="startChallenge(1)">
            üåÖ Challenge 1: Sommes de Tatooine
        </button>
        <button class="challenge-button exercise-btn" onclick="startChallenge(2)">
            ‚ö° Challenge 2: Calculs Hyperspatiaux
        </button>
        <button class="challenge-button exercise-btn" onclick="startChallenge(3)">
            üçû Challenge 3: Partage des Rations
        </button>
        <button class="challenge-button exercise-btn" onclick="startChallenge(4)">
            üîß Challenge 4: Architecture √âtoile Noire
        </button>
    </div>

    <div class="test-section">
        <h2>üß† Logic Challenges (IDs 100-102)</h2>
        <p>Teste les √©nigmes logiques bas√©es sur la table logic_challenges</p>
        <button class="challenge-button logic-btn" onclick="startChallenge(100)">
            üîç Challenge 100: Codes Secrets de l'Empire
        </button>
        <button class="challenge-button logic-btn" onclick="startChallenge(101)">
            üß© Challenge 101: √ânigme du Ma√Ætre Yoda
        </button>
        <button class="challenge-button logic-btn" onclick="startChallenge(102)">
            üîÑ Challenge 102: Formation de l'Escadron
        </button>
    </div>

    <div class="test-section">
        <h2>‚öîÔ∏è Missions Hybrides (ID 999)</h2>
        <p>Teste les missions combinant exercices + logic challenges</p>
        <button class="challenge-button hybrid-btn" onclick="startChallenge(999)">
            üèÜ Mission 999: Mission Alderaan (Hybride)
        </button>
    </div>

    <div class="test-section">
        <h2>üìã Console de Test</h2>
        <div id="test-log" class="log">
            Syst√®me hybride en attente...
        </div>
        <button class="challenge-button" onclick="clearLog()">Nettoyer le log</button>
        <button class="challenge-button" onclick="testAllChallenges()">Test automatique</button>
    </div>

    <!-- Inclusion du syst√®me hybride -->
    <script src="/static/js/challenges-hybrid.js"></script>
    
    <script>
        // Override console.log pour capturer les messages
        const originalLog = console.log;
        const logDiv = document.getElementById('test-log');
        
        console.log = function(...args) {
            originalLog(...args);
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg) : String(arg)
            ).join(' ');
            
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        };
        
        function clearLog() {
            logDiv.innerHTML = 'Log nettoy√©...<br>';
        }
        
        function testAllChallenges() {
            console.log('üß™ D√âBUT DU TEST AUTOMATIQUE');
            console.log('================================');
            
            const challengesToTest = [1, 2, 3, 4, 100, 101, 102, 999];
            let currentIndex = 0;
            
            function testNext() {
                if (currentIndex >= challengesToTest.length) {
                    console.log('‚úÖ Tous les challenges test√©s !');
                    return;
                }
                
                const challengeId = challengesToTest[currentIndex];
                console.log(`üéØ Test du challenge ${challengeId}...`);
                
                // Tester sans redirection r√©elle
                if (window.hybridChallengeSystem) {
                    try {
                        // Simuler l'affichage de la modal
                        window.hybridChallengeSystem.showChallengeModal(challengeId);
                        console.log(`‚úÖ Challenge ${challengeId} - Modal affich√©e`);
                        
                        // Fermer la modal apr√®s 1 seconde
                        setTimeout(() => {
                            window.hybridChallengeSystem.closeModal();
                            currentIndex++;
                            
                            // Tester le suivant apr√®s 500ms
                            setTimeout(testNext, 500);
                        }, 1000);
                        
                    } catch (error) {
                        console.log(`‚ùå Challenge ${challengeId} - Erreur: ${error.message}`);
                        currentIndex++;
                        setTimeout(testNext, 500);
                    }
                } else {
                    console.log('‚ùå Syst√®me hybride non disponible');
                    return;
                }
            }
            
            testNext();
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üåü Page de test du syst√®me hybride charg√©e');
            
            if (window.hybridChallengeSystem) {
                console.log('‚úÖ HybridChallengeSystem d√©tect√©');
                console.log('üìä Types disponibles:', Object.keys(window.hybridChallengeSystem.exerciseChallenges).length, 'exercices,', Object.keys(window.hybridChallengeSystem.logicChallenges).length, 'logic,', Object.keys(window.hybridChallengeSystem.weeklyChallenge).length, 'hybride');
            } else {
                console.log('‚ùå HybridChallengeSystem NON d√©tect√©');
            }
        });
    </script>
</body>
</html> 