#!/bin/sh
# pre-commit hook pour sauvegarder le mot de passe de l'utilisateur test avant chaque commit

# V√©rifier si Python est disponible
command -v python >/dev/null 2>&1 || {
    echo "‚ùå Python non trouv√©, impossible de sauvegarder le mot de passe de test_user"
    exit 0
}

# Chemin vers le script keep_test_user.py
SCRIPT_PATH="./keep_test_user.py"

# V√©rifier si le script existe
if [ -f "$SCRIPT_PATH" ]; then
    echo "üîê Sauvegarde du mot de passe de l'utilisateur test..."
    python "$SCRIPT_PATH" save
    SAVE_STATUS=$?
    
    if [ $SAVE_STATUS -eq 0 ]; then
        echo "‚úÖ Mot de passe sauvegard√© avec succ√®s"
    else
        echo "‚ö†Ô∏è Impossible de sauvegarder le mot de passe, mais poursuite du commit"
    fi
else
    echo "‚ö†Ô∏è Script $SCRIPT_PATH non trouv√©, impossible de sauvegarder le mot de passe"
fi

# Toujours permettre le commit
exit 0 