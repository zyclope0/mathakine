#!/bin/sh
# post-commit hook pour restaurer le mot de passe de l'utilisateur test apr√®s chaque commit

# V√©rifier si Python est disponible
command -v python >/dev/null 2>&1 || {
    echo "‚ùå Python non trouv√©, impossible de restaurer le mot de passe de test_user"
    exit 0
}

# Chemin vers le script keep_test_user.py
SCRIPT_PATH="./keep_test_user.py"

# V√©rifier si le script existe
if [ -f "$SCRIPT_PATH" ]; then
    echo "üîê Restauration du mot de passe de l'utilisateur test..."
    python "$SCRIPT_PATH" restore
    RESTORE_STATUS=$?
    
    if [ $RESTORE_STATUS -eq 0 ]; then
        echo "‚úÖ Mot de passe restaur√© avec succ√®s"
    else
        echo "‚ö†Ô∏è Impossible de restaurer le mot de passe"
    fi
else
    echo "‚ö†Ô∏è Script $SCRIPT_PATH non trouv√©, impossible de restaurer le mot de passe"
fi

# Toujours terminer avec succ√®s
exit 0 