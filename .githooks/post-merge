#!/bin/bash
# ğŸ”„ Hook post-merge pour Mathakine
# Met Ã  jour les dÃ©pendances aprÃ¨s un merge

echo "ğŸ”„ Post-merge: VÃ©rification des mises Ã  jour..."

# VÃ©rifier si requirements.txt a changÃ©
if git diff-tree -r --name-only --no-commit-id HEAD@{1} HEAD | grep -q "requirements.txt"; then
    echo "ğŸ“¦ requirements.txt a changÃ©, mise Ã  jour des dÃ©pendances..."
    pip install -r requirements.txt
fi

# VÃ©rifier si des migrations sont nÃ©cessaires
if git diff-tree -r --name-only --no-commit-id HEAD@{1} HEAD | grep -q "migrations/"; then
    echo "ğŸ—ƒï¸  Nouvelles migrations dÃ©tectÃ©es"
    echo "ğŸ’¡ Pensez Ã  exÃ©cuter: alembic upgrade head"
fi

echo "âœ… Post-merge terminÃ©"
