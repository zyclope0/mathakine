#!/bin/bash
# ğŸ” Hook pre-commit pour Mathakine
# ExÃ©cute les vÃ©rifications automatiques avant chaque commit

set -e

echo "ğŸ” ExÃ©cution des vÃ©rifications pre-commit..."

# VÃ©rifier que Python est disponible
if ! command -v python &> /dev/null; then
    echo "âŒ Python n'est pas installÃ© ou accessible"
    exit 1
fi

# ExÃ©cuter le script de vÃ©rification Python
python scripts/pre_commit_check.py

# RÃ©cupÃ©rer le code de sortie
exit_code=$?

if [ $exit_code -eq 0 ]; then
    echo ""
    echo "âœ… Toutes les vÃ©rifications sont passÃ©es"
    echo "ğŸš€ Commit autorisÃ©"
else
    echo ""
    echo "âŒ Des vÃ©rifications ont Ã©chouÃ©"
    echo "ğŸš« Commit bloquÃ©"
    echo ""
    echo "ğŸ’¡ Pour forcer le commit (non recommandÃ©):"
    echo "   git commit --no-verify"
fi

exit $exit_code 